{"ast":null,"code":"var _jsxFileName = \"E:\\\\IT\\u904B\\u7528\\u30B7\\u30B9\\u30C6\\u30E0\\\\03_\\u5B9F\\u88C5\\\\it-ops-system\\\\frontend\\\\src\\\\App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { AppRouter } from './routes/AppRouter';\nimport websocket from './services/websocket';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [connectionStatus, setConnectionStatus] = useState('initializing');\n\n  // WebSocket接続を初期化\n  useEffect(() => {\n    console.log('Initializing WebSocket or Polling...');\n\n    // WebSocketに接続\n    websocket.connect();\n\n    // イベントリスナーを登録\n    websocket.on('connected', data => {\n      console.log('WebSocket connected:', data);\n      setConnectionStatus('connected');\n    });\n    websocket.on('disconnected', data => {\n      console.log('WebSocket disconnected:', data);\n      setConnectionStatus('disconnected');\n    });\n    websocket.on('error', error => {\n      console.error('WebSocket error:', error);\n      // エラーが発生してもステータスは更新しない（フォールバックメカニズムが処理）\n    });\n\n    // システム状態更新の受信\n    websocket.on('system_status', status => {\n      console.log('System status update received:', status);\n      // ここでシステム状態を更新するための処理を追加できます\n    });\n\n    // コンポーネントがアンマウントされた時に接続を閉じる\n    return () => {\n      console.log('Closing WebSocket connection...');\n      websocket.disconnect();\n    };\n  }, []);\n\n  // 接続ステータスをデバッグ表示（開発環境のみ）\n  useEffect(() => {\n    if (process.env.NODE_ENV === 'development') {\n      console.log(`Connection status changed: ${connectionStatus}`);\n    }\n  }, [connectionStatus]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(AppRouter, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"HAeCemNMDK2ehpU1s1Ef8wl7tq8=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","AppRouter","websocket","jsxDEV","_jsxDEV","App","_s","connectionStatus","setConnectionStatus","console","log","connect","on","data","error","status","disconnect","process","env","NODE_ENV","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["E:/IT運用システム/03_実装/it-ops-system/frontend/src/App.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { AppRouter } from './routes/AppRouter';\r\nimport websocket from './services/websocket';\r\n\r\nfunction App() {\r\n  const [connectionStatus, setConnectionStatus] = useState<string>('initializing');\r\n  \r\n  // WebSocket接続を初期化\r\n  useEffect(() => {\r\n    console.log('Initializing WebSocket or Polling...');\r\n    \r\n    // WebSocketに接続\r\n    websocket.connect();\r\n    \r\n    // イベントリスナーを登録\r\n    websocket.on('connected', (data: { timestamp: string }) => {\r\n      console.log('WebSocket connected:', data);\r\n      setConnectionStatus('connected');\r\n    });\r\n    \r\n    websocket.on('disconnected', (data: { code: number; reason: string; timestamp: string }) => {\r\n      console.log('WebSocket disconnected:', data);\r\n      setConnectionStatus('disconnected');\r\n    });\r\n    \r\n    websocket.on('error', (error: { error: unknown; timestamp: string }) => {\r\n      console.error('WebSocket error:', error);\r\n      // エラーが発生してもステータスは更新しない（フォールバックメカニズムが処理）\r\n    });\r\n    \r\n    // システム状態更新の受信\r\n    websocket.on('system_status', (status: any) => {\r\n      console.log('System status update received:', status);\r\n      // ここでシステム状態を更新するための処理を追加できます\r\n    });\r\n    \r\n    // コンポーネントがアンマウントされた時に接続を閉じる\r\n    return () => {\r\n      console.log('Closing WebSocket connection...');\r\n      websocket.disconnect();\r\n    };\r\n  }, []);\r\n  \r\n  // 接続ステータスをデバッグ表示（開発環境のみ）\r\n  useEffect(() => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.log(`Connection status changed: ${connectionStatus}`);\r\n    }\r\n  }, [connectionStatus]);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <AppRouter />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,SAAS,QAAQ,oBAAoB;AAC9C,OAAOC,SAAS,MAAM,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7C,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAM,CAACC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGR,QAAQ,CAAS,cAAc,CAAC;;EAEhF;EACAD,SAAS,CAAC,MAAM;IACdU,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;;IAEnD;IACAR,SAAS,CAACS,OAAO,CAAC,CAAC;;IAEnB;IACAT,SAAS,CAACU,EAAE,CAAC,WAAW,EAAGC,IAA2B,IAAK;MACzDJ,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEG,IAAI,CAAC;MACzCL,mBAAmB,CAAC,WAAW,CAAC;IAClC,CAAC,CAAC;IAEFN,SAAS,CAACU,EAAE,CAAC,cAAc,EAAGC,IAAyD,IAAK;MAC1FJ,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEG,IAAI,CAAC;MAC5CL,mBAAmB,CAAC,cAAc,CAAC;IACrC,CAAC,CAAC;IAEFN,SAAS,CAACU,EAAE,CAAC,OAAO,EAAGE,KAA4C,IAAK;MACtEL,OAAO,CAACK,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;MACxC;IACF,CAAC,CAAC;;IAEF;IACAZ,SAAS,CAACU,EAAE,CAAC,eAAe,EAAGG,MAAW,IAAK;MAC7CN,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEK,MAAM,CAAC;MACrD;IACF,CAAC,CAAC;;IAEF;IACA,OAAO,MAAM;MACXN,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;MAC9CR,SAAS,CAACc,UAAU,CAAC,CAAC;IACxB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;;EAEN;EACAjB,SAAS,CAAC,MAAM;IACd,IAAIkB,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,EAAE;MAC1CV,OAAO,CAACC,GAAG,CAAC,8BAA8BH,gBAAgB,EAAE,CAAC;IAC/D;EACF,CAAC,EAAE,CAACA,gBAAgB,CAAC,CAAC;EAEtB,oBACEH,OAAA;IAAKgB,SAAS,EAAC,KAAK;IAAAC,QAAA,eAClBjB,OAAA,CAACH,SAAS;MAAAqB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACV,CAAC;AAEV;AAACnB,EAAA,CAnDQD,GAAG;AAAAqB,EAAA,GAAHrB,GAAG;AAqDZ,eAAeA,GAAG;AAAC,IAAAqB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}