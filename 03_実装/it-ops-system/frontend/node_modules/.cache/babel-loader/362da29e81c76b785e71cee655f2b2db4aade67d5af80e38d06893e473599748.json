{"ast":null,"code":"import React,{useEffect}from'react';import{useNavigate}from'react-router-dom';import{Box,Container,CssBaseline,CircularProgress,Alert,Typography,Button}from'@mui/material';import{useAuth}from'../contexts/AuthContext';import{SideNav}from'./SideNav';import{ErrorBoundary}from'react-error-boundary';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const AppLayout=_ref=>{let{children}=_ref;const{user,isLoading,error}=useAuth();const navigate=useNavigate();useEffect(()=>{if(!isLoading&&!user){navigate('/login');}},[isLoading,user,navigate]);if(isLoading){return/*#__PURE__*/_jsx(Container,{sx:{display:'flex',justifyContent:'center',mt:4},children:/*#__PURE__*/_jsx(CircularProgress,{})});}if(error){return/*#__PURE__*/_jsx(Container,{sx:{mt:4},children:/*#__PURE__*/_jsxs(Alert,{severity:\"error\",children:[/*#__PURE__*/_jsx(Typography,{children:error}),/*#__PURE__*/_jsx(Button,{onClick:()=>navigate('/login'),children:\"\\u30ED\\u30B0\\u30A4\\u30F3\\u30DA\\u30FC\\u30B8\\u306B\\u623B\\u308B\"})]})});}return/*#__PURE__*/_jsxs(Box,{sx:{display:'flex'},children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(SideNav,{}),/*#__PURE__*/_jsx(Box,{component:\"main\",sx:{flexGrow:1,p:3},children:/*#__PURE__*/_jsx(ErrorBoundary,{fallback:/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:/*#__PURE__*/_jsx(Typography,{children:\"\\u4E88\\u671F\\u305B\\u306C\\u30A8\\u30E9\\u30FC\\u304C\\u767A\\u751F\\u3057\\u307E\\u3057\\u305F\"})}),children:children})})]});};","map":{"version":3,"names":["React","useEffect","useNavigate","Box","Container","CssBaseline","CircularProgress","Alert","Typography","Button","useAuth","SideNav","ErrorBoundary","jsx","_jsx","jsxs","_jsxs","AppLayout","_ref","children","user","isLoading","error","navigate","sx","display","justifyContent","mt","severity","onClick","component","flexGrow","p","fallback"],"sources":["E:/IT運用システム/03_実装/it-ops-system/frontend/src/components/AppLayout.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  Box,\r\n  Container,\r\n  CssBaseline,\r\n  CircularProgress,\r\n  Alert,\r\n  Typography,\r\n  Button,\r\n} from '@mui/material';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { SideNav } from './SideNav';\r\nimport { ErrorBoundary } from 'react-error-boundary';\r\n\r\nexport const AppLayout: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const { user, isLoading, error } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (!isLoading && !user) {\r\n      navigate('/login');\r\n    }\r\n  }, [isLoading, user, navigate]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Container sx={{ display: 'flex', justifyContent: 'center', mt: 4 }}>\r\n        <CircularProgress />\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Container sx={{ mt: 4 }}>\r\n        <Alert severity=\"error\">\r\n          <Typography>{error}</Typography>\r\n          <Button onClick={() => navigate('/login')}>\r\n            ログインページに戻る\r\n          </Button>\r\n        </Alert>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box sx={{ display: 'flex' }}>\r\n      <CssBaseline />\r\n      <SideNav />\r\n      <Box component=\"main\" sx={{ flexGrow: 1, p: 3 }}>\r\n        <ErrorBoundary\r\n          fallback={\r\n            <Alert severity=\"error\">\r\n              <Typography>予期せぬエラーが発生しました</Typography>\r\n            </Alert>\r\n          }\r\n        >\r\n          {children}\r\n        </ErrorBoundary>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OACEC,GAAG,CACHC,SAAS,CACTC,WAAW,CACXC,gBAAgB,CAChBC,KAAK,CACLC,UAAU,CACVC,MAAM,KACD,eAAe,CACtB,OAASC,OAAO,KAAQ,yBAAyB,CACjD,OAASC,OAAO,KAAQ,WAAW,CACnC,OAASC,aAAa,KAAQ,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErD,MAAO,MAAM,CAAAC,SAAkD,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC7E,KAAM,CAAEE,IAAI,CAAEC,SAAS,CAAEC,KAAM,CAAC,CAAGZ,OAAO,CAAC,CAAC,CAC5C,KAAM,CAAAa,QAAQ,CAAGrB,WAAW,CAAC,CAAC,CAE9BD,SAAS,CAAC,IAAM,CACd,GAAI,CAACoB,SAAS,EAAI,CAACD,IAAI,CAAE,CACvBG,QAAQ,CAAC,QAAQ,CAAC,CACpB,CACF,CAAC,CAAE,CAACF,SAAS,CAAED,IAAI,CAAEG,QAAQ,CAAC,CAAC,CAE/B,GAAIF,SAAS,CAAE,CACb,mBACEP,IAAA,CAACV,SAAS,EAACoB,EAAE,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,QAAQ,CAAEC,EAAE,CAAE,CAAE,CAAE,CAAAR,QAAA,cAClEL,IAAA,CAACR,gBAAgB,GAAE,CAAC,CACX,CAAC,CAEhB,CAEA,GAAIgB,KAAK,CAAE,CACT,mBACER,IAAA,CAACV,SAAS,EAACoB,EAAE,CAAE,CAAEG,EAAE,CAAE,CAAE,CAAE,CAAAR,QAAA,cACvBH,KAAA,CAACT,KAAK,EAACqB,QAAQ,CAAC,OAAO,CAAAT,QAAA,eACrBL,IAAA,CAACN,UAAU,EAAAW,QAAA,CAAEG,KAAK,CAAa,CAAC,cAChCR,IAAA,CAACL,MAAM,EAACoB,OAAO,CAAEA,CAAA,GAAMN,QAAQ,CAAC,QAAQ,CAAE,CAAAJ,QAAA,CAAC,8DAE3C,CAAQ,CAAC,EACJ,CAAC,CACC,CAAC,CAEhB,CAEA,mBACEH,KAAA,CAACb,GAAG,EAACqB,EAAE,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAN,QAAA,eAC3BL,IAAA,CAACT,WAAW,GAAE,CAAC,cACfS,IAAA,CAACH,OAAO,GAAE,CAAC,cACXG,IAAA,CAACX,GAAG,EAAC2B,SAAS,CAAC,MAAM,CAACN,EAAE,CAAE,CAAEO,QAAQ,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAE,CAAAb,QAAA,cAC9CL,IAAA,CAACF,aAAa,EACZqB,QAAQ,cACNnB,IAAA,CAACP,KAAK,EAACqB,QAAQ,CAAC,OAAO,CAAAT,QAAA,cACrBL,IAAA,CAACN,UAAU,EAAAW,QAAA,CAAC,sFAAc,CAAY,CAAC,CAClC,CACR,CAAAA,QAAA,CAEAA,QAAQ,CACI,CAAC,CACb,CAAC,EACH,CAAC,CAEV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}